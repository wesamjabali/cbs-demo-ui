{"remainingRequest":"/home/wesam/Code/CMS/cms-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wesam/Code/CMS/cms-ui/src/views/Clock.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wesam/Code/CMS/cms-ui/src/views/Clock.vue","mtime":1599014824788},{"path":"/home/wesam/Code/CMS/cms-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wesam/Code/CMS/cms-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/wesam/Code/CMS/cms-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wesam/Code/CMS/cms-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2xvY2siLAogIGNvbXB1dGVkOiB7CiAgICBpc0xvZ2dlZEluKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5pc0xvZ2dlZEluOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNsb2NrU3RhdHVzOiAnJywKICAgICAgcHVuY2hEYXRhOiBbXSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICJJRCIsCiAgICAgICAgICBhbGlnbjogInN0YXJ0IiwKICAgICAgICAgIHZhbHVlOiAiaWQiLAogICAgICAgICAgZ3JvdXBhYmxlOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgeyB0ZXh0OiAiSW4gVGltZSIsIHZhbHVlOiAiaW50aW1lIiwgZ3JvdXBhYmxlOiBmYWxzZSB9LAogICAgICAgIHsgdGV4dDogIk91dCBUaW1lIiwgdmFsdWU6ICJvdXR0aW1lIiB9LAogICAgICAgIHsgdGV4dDogIlRpbWUiLCB2YWx1ZTogInRpbWUiLCBncm91cGFibGU6IGZhbHNlIH0KICAgICAgXQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFNlc3Npb25zKCk7CiAgICB0aGlzLmdldENsb2NrU3RhdHVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRTZXNzaW9ucygpIHsKICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoImFjY291bnQvY2xvY2svZ2V0U2Vzc2lvbnMiKTsKICAgICAgc2Vzc2lvbnMuZm9yZWFjaCgoc2Vzc2lvbikgPT4gewoKICAgICAgfSkKICAgICAgdGhpcy5wdW5jaERhdGEgPSBzZXNzaW9ucy5kYXRhOwogICAgICBjb25zb2xlLmxvZyhzZXNzaW9ucy5kYXRhKTsKICAgIH0sCiAgICBnZXRCdXR0b25UZXh0KCkgewogICAgICBpZih0aGlzLmNsb2NrU3RhdHVzID09ICdpbicpIHJldHVybiAiQ2xvY2sgT3V0IjsKICAgICAgZWxzZSByZXR1cm4gIkNsb2NrIEluIjsKICAgIH0sCiAgICBhc3luYyBnZXRDbG9ja1N0YXR1cygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB7IGRhdGEgPSB7fSB9ID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KCIvYWNjb3VudC9jbG9jay9zdGF0dXMiKTsKICAgICAgICBjb25zdCBjbG9ja1N0YXR1cyA9IGRhdGE7CiAgICAgICAgdGhpcy5jbG9ja1N0YXR1cyA9IGNsb2NrU3RhdHVzOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJnZXRDbG9ja1N0YXR1cyAtPiBlcnJvciIsIGVycm9yKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBwdW5jaENsb2NrKCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoIi9hY2NvdW50L2Nsb2NrL3B1bmNoIik7CiAgICAgICAgdGhpcy5nZXRDbG9ja1N0YXR1cygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJwdW5jaENsb2NrIC0+IGVycm9yIiwgZXJyb3IpOwogICAgICB9CiAgICB9CgogICAgLy8gZm9ybWF0UHVuY2gocHVuY2gsIHJlc3BvbnNlKSB7CiAgICAvLyAgIHB1bmNoLnVzZXJuYW1lID0gcmVzcG9uc2UuZGF0YVswXS51c2VybmFtZTsKICAgIC8vICAgbGV0IGRhdGVfdGltZSA9IG1vbWVudChwdW5jaC5kYXRlX3RpbWUpOwogICAgLy8gICBwdW5jaC5kYXRlID0gZGF0ZV90aW1lLmZvcm1hdCgiTU1NIERELCBZWVlZIik7CiAgICAvLyAgIHB1bmNoLnRpbWUgPSBkYXRlX3RpbWUuZm9ybWF0KCJoaDptbTpzcyBBIik7CiAgICAvLyAgIHJldHVybiBwdW5jaDsKICAgIC8vIH0KCiAgICAvLyBhc3luYyBjbGljaygpIHsKICAgIC8vICAgYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgiY2xvY2siLCB7CiAgICAvLyAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgLy8gIlgtQ1NSRi1UT0tFTiI6IGRvY3VtZW50CiAgICAvLyAgICAgICAvLyAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdCiAgICAvLyAgICAgICAvLyAgIC5nZXRBdHRyaWJ1dGUoImRhdGEtY3NyZiIpLAogICAgLy8gICAgICAgLy8gIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgLy8gICAgICAgLy8gQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiIKICAgIC8vICAgICB9CiAgICAvLyAgIH0pOwogICAgLy8gICAvLyBUT0RPOiBJbXBsZW1lbnQKICAgIC8vICAgLy90aGlzLmdldENsb2NrU3RhdHVzKCk7CiAgICAvLyAgIC8vdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KCIvY2xvY2tQdW5jaGVzIik7IC8vZ2V0IGxhc3QgcHVuY2ggZnJvbSBzZXJ2ZXIgZm9yIGFjY3VyYWN5CgogICAgLy8gICAvLyBmb3IgKAogICAgLy8gICAvLyAgIHZhciBqID0gdGhpcy5wdW5jaERhdGEubGVuZ3RoOwogICAgLy8gICAvLyAgIGogPCByZXNwb25zZS5kYXRhWzBdLmNsb2NrUHVuY2hlcy5sZW5ndGg7CiAgICAvLyAgIC8vICAgaisrCiAgICAvLyAgIC8vICkgewogICAgLy8gICAvLyAgIGxldCBmb3JtYXR0ZWRQdW5jaCA9IHRoaXMuZm9ybWF0UHVuY2goCiAgICAvLyAgIC8vICAgICByZXNwb25zZS5kYXRhWzBdLmNsb2NrUHVuY2hlc1tqXSwKICAgIC8vICAgLy8gICAgIHJlc3BvbnNlCiAgICAvLyAgIC8vICAgKTsKICAgIC8vICAgLy8gICB0aGlzLnB1bmNoRGF0YS5wdXNoKGZvcm1hdHRlZFB1bmNoKTsKICAgIC8vICAgLy8gfQogICAgLy8gfSwKICAgIC8vIFRPRE86IEltcGxlbWVudAogICAgLy8gYXN5bmMgZ2V0UHVuY2hlcygpIHsKICAgIC8vICAgY29uc29sZS5sb2coInRlc3RpbmciKTsKICAgIC8vICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KCIvY2xvY2tQdW5jaGVzIik7CiAgICAvLyAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVzcG9uc2UuZGF0YVswXS5jbG9ja1B1bmNoZXMubGVuZ3RoOyBqKyspIHsKICAgIC8vICAgICBsZXQgZm9ybWF0dGVkUHVuY2ggPSB0aGlzLmZvcm1hdFB1bmNoKAogICAgLy8gICAgICAgcmVzcG9uc2UuZGF0YVswXS5jbG9ja1B1bmNoZXNbal0sCiAgICAvLyAgICAgICByZXNwb25zZQogICAgLy8gICAgICk7CiAgICAvLyAgICAgdGhpcy5wdW5jaERhdGEucHVzaChmb3JtYXR0ZWRQdW5jaCk7CiAgICAvLyAgICAgY29uc29sZS5sb2coInRlc2luZzIiKTsKICAgIC8vICAgfQogICAgLy8gfQogIH0KfTsK"},{"version":3,"sources":["Clock.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Clock.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-row class=\"justify-center\">\n    <v-col cols=\"12\">\n      <div>\n        <v-data-table\n          :headers=\"headers\"\n          :items=\"punchData\"\n          item-key=\"id\"\n          :sortBy=\"['id']\"\n          :sort-desc=\"[true]\"\n          :search=\"search\"\n          :mobile-breakpoint=\"0\"\n          multi-sort\n          height=\"50vh\"\n          fixed-header\n          hide-default-footer\n          show-group-by\n          :items-per-page=\"200\"\n        ></v-data-table>\n      </div>\n      <div>\n        <v-card-text>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n          ></v-text-field>\n        </v-card-text>\n      </div>\n      <div class=\"d-flex\">\n        <v-btn\n          width=\"50%\"\n          @click=\"punchClock()\"\n          x-large\n          color=\"primary\"\n          class=\"mx-auto\"\n        >\n          {{ getButtonText() }}\n        </v-btn>\n        <v-btn\n        @click=\"getSessions()\">\n        Get sesssions\n        </v-btn>\n      </div>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\n// import moment from \"moment\";\n\nexport default {\n  name: \"Clock\",\n  computed: {\n    isLoggedIn() {\n      return this.$store.getters.isLoggedIn;\n    }\n  },\n  data() {\n    return {\n      clockStatus: '',\n      punchData: [],\n      search: \"\",\n      headers: [\n        {\n          text: \"ID\",\n          align: \"start\",\n          value: \"id\",\n          groupable: false\n        },\n        { text: \"In Time\", value: \"intime\", groupable: false },\n        { text: \"Out Time\", value: \"outtime\" },\n        { text: \"Time\", value: \"time\", groupable: false }\n      ]\n    };\n  },\n  mounted() {\n    this.getSessions();\n    this.getClockStatus();\n  },\n  methods: {\n    async getSessions() {\n      const sessions = await this.$axios.get(\"account/clock/getSessions\");\n      sessions.foreach((session) => {\n\n      })\n      this.punchData = sessions.data;\n      console.log(sessions.data);\n    },\n    getButtonText() {\n      if(this.clockStatus == 'in') return \"Clock Out\";\n      else return \"Clock In\";\n    },\n    async getClockStatus() {\n      try {\n        const { data = {} } = await this.$axios.get(\"/account/clock/status\");\n        const clockStatus = data;\n        this.clockStatus = clockStatus;\n      } catch (error) {\n        console.log(\"getClockStatus -> error\", error);\n      }\n    },\n\n    async punchClock() {\n      try {\n        await this.$axios.post(\"/account/clock/punch\");\n        this.getClockStatus();\n      } catch (error) {\n        console.log(\"punchClock -> error\", error);\n      }\n    }\n\n    // formatPunch(punch, response) {\n    //   punch.username = response.data[0].username;\n    //   let date_time = moment(punch.date_time);\n    //   punch.date = date_time.format(\"MMM DD, YYYY\");\n    //   punch.time = date_time.format(\"hh:mm:ss A\");\n    //   return punch;\n    // }\n\n    // async click() {\n    //   await this.$axios.post(\"clock\", {\n    //     headers: {\n    //       // \"X-CSRF-TOKEN\": document\n    //       //   .getElementsByTagName(\"body\")[0]\n    //       //   .getAttribute(\"data-csrf\"),\n    //       // \"X-Requested-With\": \"XMLHttpRequest\",\n    //       // Accept: \"application/json\"\n    //     }\n    //   });\n    //   // TODO: Implement\n    //   //this.getClockStatus();\n    //   //var response = await this.$axios.get(\"/clockPunches\"); //get last punch from server for accuracy\n\n    //   // for (\n    //   //   var j = this.punchData.length;\n    //   //   j < response.data[0].clockPunches.length;\n    //   //   j++\n    //   // ) {\n    //   //   let formattedPunch = this.formatPunch(\n    //   //     response.data[0].clockPunches[j],\n    //   //     response\n    //   //   );\n    //   //   this.punchData.push(formattedPunch);\n    //   // }\n    // },\n    // TODO: Implement\n    // async getPunches() {\n    //   console.log(\"testing\");\n    //   let response = await this.$axios.get(\"/clockPunches\");\n    //   for (let j = 0; j < response.data[0].clockPunches.length; j++) {\n    //     let formattedPunch = this.formatPunch(\n    //       response.data[0].clockPunches[j],\n    //       response\n    //     );\n    //     this.punchData.push(formattedPunch);\n    //     console.log(\"tesing2\");\n    //   }\n    // }\n  }\n};\n</script>\n"]}]}